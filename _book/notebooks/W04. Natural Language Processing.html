<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Quantitative Methods 2 - Natural Language Processing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../notebooks/W05. Merging and Joining.html" rel="next">
<link href="../notebooks/W03. Spatial Data.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Natural Language Processing</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../" class="sidebar-logo-link">
      <img src="../BASc.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Quantitative Methods 2</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/oballinger/QM2/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="../Quantitative-Methods-2.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="../Quantitative-Methods-2.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
    <a href="" title="Share" id="sidebar-tool-dropdown-1" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-1">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W01. Python Recap.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Python Recap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W02. Pandas.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Working With Data In Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W03. Spatial Data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Working with Spatiotemporal Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W04. Natural Language Processing.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Natural Language Processing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W05. Merging and Joining.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Merging and Joining Data in Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Week 6.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Group Presentations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W07. Distributions and Basic Statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Distributions and Basic Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Week 8.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regression</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W09. Machine Learning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Machine Learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/W10. Choropleth Maps and Polygons.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Advanced Visualization</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#workshop-4-open-in-colab" id="toc-workshop-4-open-in-colab" class="nav-link active" data-scroll-target="#workshop-4-open-in-colab"><em>Workshop 4</em> [<img src="../colab-badge.png" class="img-fluid" alt="Open In Colab">]</a></li>
  <li><a href="#downloading-the-data" id="toc-downloading-the-data" class="nav-link" data-scroll-target="#downloading-the-data">Downloading the Data</a></li>
  <li><a href="#dirty-words" id="toc-dirty-words" class="nav-link" data-scroll-target="#dirty-words">Dirty Words</a></li>
  <li><a href="#the-castle-of-aaargh" id="toc-the-castle-of-aaargh" class="nav-link" data-scroll-target="#the-castle-of-aaargh">The Castle of Aaargh</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#exercise-from-hells-heart-i-stab-at-thee" id="toc-exercise-from-hells-heart-i-stab-at-thee" class="nav-link" data-scroll-target="#exercise-from-hells-heart-i-stab-at-thee">Exercise: From Hell’s Heart I Stab at Thee</a></li>
  <li><a href="#making-an-impact" id="toc-making-an-impact" class="nav-link" data-scroll-target="#making-an-impact">Making an IMPACT</a></li>
  <li><a href="#pos" id="toc-pos" class="nav-link" data-scroll-target="#pos">POS</a></li>
  <li><a href="#one-for-all" id="toc-one-for-all" class="nav-link" data-scroll-target="#one-for-all">One FOR All</a></li>
  <li><a href="#double-indentity" id="toc-double-indentity" class="nav-link" data-scroll-target="#double-indentity">Double Indentity</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise">Exercise</a></li>
  <li><a href="#working-with-larger-text-datasets" id="toc-working-with-larger-text-datasets" class="nav-link" data-scroll-target="#working-with-larger-text-datasets">Working with larger text datasets</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">Exercise</a></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2">Exercise</a>
  <ul class="collapse">
  <li><a href="#speeches" id="toc-speeches" class="nav-link" data-scroll-target="#speeches">Speeches</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.dev/oballinger/QM2/blob/main/notebooks/W04. Natural Language Processing.ipynb" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Natural Language Processing</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="workshop-4-open-in-colab" class="level2">
<h2 class="anchored" data-anchor-id="workshop-4-open-in-colab"><em>Workshop 4</em> [<img src="../colab-badge.png" class="img-fluid" alt="Open In Colab">]</h2>
<p>Today we’ll be using the <em>Natural Language Tool Kit</em> package <strong>nltk</strong>, which will allow us to split (clean) text into words, parts of speech, and sentences, and plot word occurrence and frequency.</p>
<p><strong>Aims</strong></p>
<ul>
<li>to work with nltk and some standard corpus texts</li>
<li>to tokenise by word and sentence</li>
<li>to plot word occurrence and frequency</li>
<li>to filter by parts of speech</li>
</ul>
</section>
<section id="downloading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="downloading-the-data">Downloading the Data</h2>
<p>Let’s grab the data we will need this week from our course website and save it into our data folder. If you’ve not already created a data folder then do so using the following command.</p>
<p>Don’t worry if it generates an error, that means you’ve already got a data folder.</p>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Make a ./data directory</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install nltk</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>mkdir data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: nltk in /Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages (3.7)
Requirement already satisfied: click in /Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages (from nltk) (8.0.1)
Requirement already satisfied: joblib in /Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages (from nltk) (1.0.1)
Requirement already satisfied: regex&gt;=2021.8.3 in /Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages (from nltk) (2022.9.13)
Requirement already satisfied: tqdm in /Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages (from nltk) (4.61.0)
WARNING: You are using pip version 21.1.2; however, version 22.2.2 is available.
You should consider upgrading via the '/Users/ollieballinger/.pyenv/versions/3.9.5/bin/python3.9 -m pip install --upgrade pip' command.
mkdir: data: File exists</code></pre>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Make a ./data/wk7 directory</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>mkdir data<span class="op">/</span>wk7</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Download the data into this directory</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>curl https:<span class="op">//</span>s3.eu<span class="op">-</span>west<span class="op">-</span><span class="fl">2.</span><span class="er">amazonaws</span>.com<span class="op">/</span>qm2<span class="op">/</span>wk7<span class="op">/</span>PanelA.txt <span class="op">-</span>o .<span class="op">/</span>data<span class="op">/</span>wk4<span class="op">/</span>PanelA.txt</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>curl https:<span class="op">//</span>s3.eu<span class="op">-</span>west<span class="op">-</span><span class="fl">2.</span><span class="er">amazonaws</span>.com<span class="op">/</span>qm2<span class="op">/</span>wk7<span class="op">/</span>PanelA2.txt <span class="op">-</span>o .<span class="op">/</span>data<span class="op">/</span>wk4<span class="op">/</span>PanelA2.txt</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>curl https:<span class="op">//</span>s3.eu<span class="op">-</span>west<span class="op">-</span><span class="fl">2.</span><span class="er">amazonaws</span>.com<span class="op">/</span>qm2<span class="op">/</span>wk7<span class="op">/</span>PanelB.txt <span class="op">-</span>o .<span class="op">/</span>data<span class="op">/</span>wk4<span class="op">/</span>PanelB.txt</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>curl https:<span class="op">//</span>s3.eu<span class="op">-</span>west<span class="op">-</span><span class="fl">2.</span><span class="er">amazonaws</span>.com<span class="op">/</span>qm2<span class="op">/</span>wk7<span class="op">/</span>PanelC.txt <span class="op">-</span>o .<span class="op">/</span>data<span class="op">/</span>wk4<span class="op">/</span>PanelC.txt</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>curl https:<span class="op">//</span>s3.eu<span class="op">-</span>west<span class="op">-</span><span class="fl">2.</span><span class="er">amazonaws</span>.com<span class="op">/</span>qm2<span class="op">/</span>wk7<span class="op">/</span>PanelD.txt <span class="op">-</span>o .<span class="op">/</span>data<span class="op">/</span>wk4<span class="op">/</span>PanelD.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mkdir: data/wk7: File exists
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  6374  100  6374    0     0  87376      0 --:--:-- --:--:-- --:--:-- 92376
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  4091  100  4091    0     0  36609      0 --:--:-- --:--:-- --:--:-- 39336
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 10903  100 10903    0     0  63110      0 --:--:-- --:--:-- --:--:-- 64514
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  8140  100  8140    0     0  32892      0 --:--:-- --:--:-- --:--:-- 336306
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  5801  100  5801    0     0  45085      0 --:--:-- --:--:-- --:--:-- 46782</code></pre>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pylab</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>pylab.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="fl">10.</span>, <span class="fl">8.</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dirty-words" class="level2">
<h2 class="anchored" data-anchor-id="dirty-words">Dirty Words</h2>
<p>Text often comes ‘unclean’ either containing tags such as HTML (or XML), or has other issues, but fortunately we will be using ‘clean’ sources, at least initially. Be cautious when committing to a text analysis project - you may spend a great deal of time tidying up your text.</p>
<p>The kind of analysis we will be doing reqires <em>tokenizing</em> a text, and <em>tagging</em> individual words. Tokenizing means splitting the text into individul sentences or individual words, while tagging means classifying each word according to a POS (Parts Of Speech) classification.</p>
</section>
<section id="the-castle-of-aaargh" class="level2">
<h2 class="anchored" data-anchor-id="the-castle-of-aaargh">The Castle of Aaargh</h2>
<p>We will first experiment with nltk and its built in corpus texts. We’ll work with some Monty Python, beloved of comedy bores for half a century</p>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<ul>
<li>install nltk through package manager, or the command line</li>
<li>import nltk</li>
<li>type nltk.download(‘book’). This will automatically download the books into our workspace</li>
</ul>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nltk: natural language processing toolkit</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Download the sample books</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'book'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading collection 'book'
[nltk_data]    | 
[nltk_data]    | Downloading package abc to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package abc is already up-to-date!
[nltk_data]    | Downloading package brown to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package brown is already up-to-date!
[nltk_data]    | Downloading package chat80 to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package chat80 is already up-to-date!
[nltk_data]    | Downloading package cmudict to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package cmudict is already up-to-date!
[nltk_data]    | Downloading package conll2000 to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package conll2000 is already up-to-date!
[nltk_data]    | Downloading package conll2002 to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package conll2002 is already up-to-date!
[nltk_data]    | Downloading package dependency_treebank to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package dependency_treebank is already up-to-date!
[nltk_data]    | Downloading package genesis to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package genesis is already up-to-date!
[nltk_data]    | Downloading package gutenberg to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package gutenberg is already up-to-date!
[nltk_data]    | Downloading package ieer to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package ieer is already up-to-date!
[nltk_data]    | Downloading package inaugural to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package inaugural is already up-to-date!
[nltk_data]    | Downloading package movie_reviews to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package movie_reviews is already up-to-date!
[nltk_data]    | Downloading package nps_chat to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package nps_chat is already up-to-date!
[nltk_data]    | Downloading package names to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package names is already up-to-date!
[nltk_data]    | Downloading package ppattach to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package ppattach is already up-to-date!
[nltk_data]    | Downloading package reuters to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package reuters is already up-to-date!
[nltk_data]    | Downloading package senseval to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package senseval is already up-to-date!
[nltk_data]    | Downloading package state_union to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package state_union is already up-to-date!
[nltk_data]    | Downloading package stopwords to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package stopwords is already up-to-date!
[nltk_data]    | Downloading package swadesh to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package swadesh is already up-to-date!
[nltk_data]    | Downloading package timit to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package timit is already up-to-date!
[nltk_data]    | Downloading package treebank to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package treebank is already up-to-date!
[nltk_data]    | Downloading package toolbox to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package toolbox is already up-to-date!
[nltk_data]    | Downloading package udhr to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package udhr is already up-to-date!
[nltk_data]    | Downloading package udhr2 to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package udhr2 is already up-to-date!
[nltk_data]    | Downloading package unicode_samples to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package unicode_samples is already up-to-date!
[nltk_data]    | Downloading package webtext to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package webtext is already up-to-date!
[nltk_data]    | Downloading package wordnet to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package wordnet is already up-to-date!
[nltk_data]    | Downloading package wordnet_ic to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package wordnet_ic is already up-to-date!
[nltk_data]    | Downloading package words to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package words is already up-to-date!
[nltk_data]    | Downloading package maxent_treebank_pos_tagger to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package maxent_treebank_pos_tagger is already up-
[nltk_data]    |       to-date!
[nltk_data]    | Downloading package maxent_ne_chunker to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package maxent_ne_chunker is already up-to-date!
[nltk_data]    | Downloading package universal_tagset to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package universal_tagset is already up-to-date!
[nltk_data]    | Downloading package punkt to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package punkt is already up-to-date!
[nltk_data]    | Downloading package book_grammars to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package book_grammars is already up-to-date!
[nltk_data]    | Downloading package city_database to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package city_database is already up-to-date!
[nltk_data]    | Downloading package tagsets to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package tagsets is already up-to-date!
[nltk_data]    | Downloading package panlex_swadesh to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package panlex_swadesh is already up-to-date!
[nltk_data]    | Downloading package averaged_perceptron_tagger to
[nltk_data]    |     /Users/ollieballinger/nltk_data...
[nltk_data]    |   Package averaged_perceptron_tagger is already up-
[nltk_data]    |       to-date!
[nltk_data]    | 
[nltk_data]  Done downloading collection book</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>True</code></pre>
</div>
</div>
<p>Now, we import the sample texts. You’ll notice that text6 is “Monty Python and the Holy Grail”, as promised. Presumably this was compiled pre-<em>Spamalot</em>.</p>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Import all features from nltk.book</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.book <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s look at the object text6; we can look at the first few words..</p>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View the first ten words of text6</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>text6[<span class="dv">1</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>['1', ':', '[', 'wind', ']', '[', 'clop', 'clop', 'clop']</code></pre>
</div>
</div>
<p>Which are presumably stage directions rather than dialogue. How many words/symbols are in the text?</p>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View the length of the list</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(text6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>16967</code></pre>
</div>
</div>
<p>Bear in mind that a lot of the functions we will carry out rely on this being a text object - we’ll start to think about how we use free text and convert it to a <strong>Text</strong> object later.</p>
<p>We can now start to do some slightly more sophisticated work; for example, a dispersion plot to see where words appear. Let’s give it a few keywords that those familiar with <em>…The Holy Grail</em> might recognise:</p>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>text6.dispersion_plot([<span class="st">'Grail'</span>,<span class="st">'rabbit'</span>,<span class="st">'Knights'</span>,<span class="st">'Ni'</span>,<span class="st">'castle'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>And we can easily count <em>how many</em> times a word appears.</p>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>text6.count(<span class="st">'Ni'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>47</code></pre>
</div>
</div>
<p>Or the words which most commonly appear together:</p>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>text6.collocations()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>BLACK KNIGHT; clop clop; HEAD KNIGHT; mumble mumble; Holy Grail;
squeak squeak; FRENCH GUARD; saw saw; Sir Robin; Run away; CARTOON
CHARACTER; King Arthur; Iesu domine; Pie Iesu; DEAD PERSON; Round
Table; clap clap; OLD MAN; dramatic chord; dona eis</code></pre>
</div>
</div>
</section>
<section id="exercise-from-hells-heart-i-stab-at-thee" class="level2">
<h2 class="anchored" data-anchor-id="exercise-from-hells-heart-i-stab-at-thee">Exercise: From Hell’s Heart I Stab at Thee</h2>
<p>From Moby Dick, find out - Where the narrator Ishmael, Captain Ahab and his Nemesis are mentioned. When do each enter the story? Where do they have most emphasis? - Which parts of the books appear to take place at sea, and points where their ship is wrecked or sinking (spoilers) - two significant places in the story (HINT: use collocations)</p>
<p>Let’s now look at carrying out the full process of importing and working with text data.</p>
</section>
<section id="making-an-impact" class="level2">
<h2 class="anchored" data-anchor-id="making-an-impact">Making an IMPACT</h2>
<p>As part of the REF2014 exercise, universities reported on the <em>Impact</em> their research activities had on the world. Their <em>Impact Case Studies</em> were subsequently made available by HEFCE. What sort of information do they contain? How do universities frame “impact”? All of this data is available via the REF website.</p>
<p>A little context: I’ve included examples from the four <em>panels</em> used by HEFCE. Broadly speaking, Panel A is health, bioscience and medicine, B is physical science and engineering, C is social science, and D is humanities - the full categories are visible here: http://www.ref.ac.uk/panels/unitsofassessment/</p>
<p>Let’s first look at random sample from Panel A:</p>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data path to file</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>data_path <span class="op">=</span> <span class="st">"./data/wk7/PanelA.txt"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(data_path) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>FileNotFoundError: [Errno 2] No such file or directory: './data/wk7/PanelA.txt'</code></pre>
</div>
</div>
<p>We could tokenize this into sentences:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>sentences <span class="op">=</span> nltk.sent_tokenize(data)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>sentences[<span class="dv">1</span>:<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>['Researchers developed a practice development framework for implementing and assessing the delivery of evidence-based practice in 82 UK health and social care units during the impact period.',
 'Benefits to staff include better communication and team structure.',
 'Benefits to patients include higher standards of cleanliness, privacy and dignity, as well as a decrease in length of hospital stays and appointment waiting times.',
 'Delivery has extended to cover entire NHS Trusts serving a resident population of over 3.5 million, social services departments and third sector organisations across the south of England and beyond.']</code></pre>
</div>
</div>
<p>Or into individual words; generally, it may be useful to retain sentences, so we can see where two words are in the same sentence, for example - but we’ll be doing something simpler:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> nltk.word_tokenize(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tokens[<span class="dv">1</span>:<span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>['*',
 '*',
 '*',
 '*',
 'title_inst_10000824-u_3-case_43396',
 '*',
 'UKPRN_10000824',
 '*',
 'uoa_3',
 '*',
 'ID_43396',
 '*',
 'panel_A',
 'Bournemouth',
 'University',
 '(',
 'BU',
 ')',
 'has']</code></pre>
</div>
</div>
<p>Tokenising is a process which has many subtleties and corner-cases, and you may want to proceed in a more fine-grained way for some texts:</p>
<p>http://nltk.org/api/nltk.tokenize.html</p>
<p>Let’s now convert this into a Text object, which will allow us to analyse other aspects of the text. For example, we can look at <strong>collocations</strong>, words which commonly appear together. This may help to provide context.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>simple_text <span class="op">=</span> nltk.Text(tokens)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>simple_text.collocations()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>practice development; Foundation Trust; NHS Foundation; 3.5 million;
Poole Hospital; Trusts serving; resident population; social care;
Hospital NHS; waiting times; action plan; development process; patient
privacy; user journey; better communication; cultural change; visiting
times; team members; services departments; evidence-based practice</code></pre>
</div>
</div>
<p>We can create a dispersion plot - although in this case, it tells us a limited amount…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>simple_text.dispersion_plot([<span class="st">'NHS'</span>, <span class="st">'evidence'</span>, <span class="st">'practice'</span>, <span class="st">'Hospital'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Even from this, we get a sense of the work this unit does, and its impacts on the world. But what are the most 20 common words used? To find this out, we produce a <strong>Freq</strong>uency <strong>Dist</strong>ribution (<em>FreqDist</em>) object. This has an implicit loop - the <em>for</em> statement is telling python to look through all the words in ‘tokens’ and seeing how often they occur. The .lower() command converts them all to lower case for comparison, so it will flag up upper <em>and</em> lower case occurrences of the word.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fd <span class="op">=</span> nltk.FreqDist(word.lower() <span class="cf">for</span> word <span class="kw">in</span> tokens)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>fd.plot(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>&lt;AxesSubplot:xlabel='Samples', ylabel='Counts'&gt;</code></pre>
</div>
</div>
<p>Not very helpful - this includes all kinds of junk, and tells us that “and” is very common. Not very interesting. Let’s try a bit harder and identify Parts of Speech.</p>
</section>
<section id="pos" class="level2">
<h2 class="anchored" data-anchor-id="pos">POS</h2>
<p>Parts of speech indicate whether something is a noun, a verb, adjective, and so on. In nltk, we can use the <em>pos_tag</em> command, which will identify which word belongs to which part of speech.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>tagged <span class="op">=</span> nltk.pos_tag(tokens)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>tagged[<span class="dv">0</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>[('*', 'JJ'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('title_inst_10000824-u_3-case_43396', 'JJ'),
 ('*', 'NNP'),
 ('UKPRN_10000824', 'NNP'),
 ('*', 'NNP'),
 ('uoa_3', 'JJ')]</code></pre>
</div>
</div>
<p>‘NNP’ refers to Proper Noun, Singular; you can find the full list of Parts of Speech here: http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>permitted_tags <span class="op">=</span> <span class="bu">set</span>([</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NN'</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NNS'</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="one-for-all" class="level2">
<h2 class="anchored" data-anchor-id="one-for-all">One FOR All</h2>
<p>We’ve so far managed to avoid this staple of programming, the FOR loop - and we’re not going to delve too deeply into it in the last class of term. Of course, you probably came across FOR loops and IF statements when you worked through the prerequisites for the module, but that feels like a long time ago…</p>
<p>We do use FOR and IF here, and it’s worth understanding a bit about what it means, even if you don’t intend to use it a lot yourself. In the next piece of code, we set up <em>fd</em>, a new object which will record frequency distribution information. Then we use a FOR loop</p>
<p>`for bit in tagged: …’</p>
<p>This goes through every element of tagged one at a time - and each element is called ‘bit’ for the purposes of this loop. Then, for each ‘bit’, we check that it has one of the permitted tags, and make sure it’s at least 3 characters long - shorter words probably aren’t all that relevant in this case:</p>
<p>`if bit[1] in permitted_tags and len(bit[0])&gt;2:’</p>
<p>note that the <em>and</em> means both of these have to be true - if both <em>are</em> true, only then does the following statement execute:</p>
<p>`fd[bit[0]] = fd[bit[0]] + 1’</p>
<p>which increases the count for that word. So, this code increases the count for a word iff (if and only if) its at least 3 characters long, and it’s of the correct tag (Noun, Singular or Plural).</p>
</section>
<section id="double-indentity" class="level2">
<h2 class="anchored" data-anchor-id="double-indentity">Double Indentity</h2>
<p>One final remark: we haven’t dealt with <strong>indents</strong> much in python, but indenting the code like below, after the for statement, and <em>again</em> after the if statement, is the way that python knows it’s dealing with a loop (for) and a conditional (if). It’s also the way python deals with defining new functions, but that’s not something you will need to do. This is just a pointer - if your code doesn’t work, check the colons are there (:) and the indenting is too.</p>
<p>On with the show - as promised, this creates a word frequency graph of nouns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>fd <span class="op">=</span> nltk.FreqDist()</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit <span class="kw">in</span> tagged:</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> bit[<span class="dv">1</span>] <span class="kw">in</span> permitted_tags <span class="kw">and</span> <span class="bu">len</span>(bit[<span class="dv">0</span>])<span class="op">&gt;</span><span class="dv">2</span>:</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        fd[bit[<span class="dv">0</span>]] <span class="op">=</span> fd[bit[<span class="dv">0</span>]] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>fd.plot(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-22-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>&lt;AxesSubplot:xlabel='Samples', ylabel='Counts'&gt;</code></pre>
</div>
</div>
<p>We start to get a sense of the impact - ‘care’, ‘practice’, and ‘services’ all feature heavily.</p>
<p>Let’s now look at another randomly chosen example from Panel A:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>data_path <span class="op">=</span> <span class="st">"./data/wk7/PanelA2.txt"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(data_path) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> nltk.word_tokenize(data)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>simple_text.collocations()</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>simple_text <span class="op">=</span> nltk.Text(tokens)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>tagged <span class="op">=</span> nltk.pos_tag(tokens)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>fd <span class="op">=</span> nltk.FreqDist()</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit <span class="kw">in</span> tagged:</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> bit[<span class="dv">1</span>] <span class="kw">in</span> permitted_tags <span class="kw">and</span> <span class="bu">len</span>(bit[<span class="dv">0</span>])<span class="op">&gt;</span><span class="dv">2</span>:</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>        fd[bit[<span class="dv">0</span>]] <span class="op">=</span> fd[bit[<span class="dv">0</span>]] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>fd.plot(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>practice development; Foundation Trust; NHS Foundation; 3.5 million;
Poole Hospital; Trusts serving; resident population; social care;
Hospital NHS; waiting times; action plan; development process; patient
privacy; user journey; better communication; cultural change; visiting
times; team members; services departments; evidence-based practice</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-23-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>&lt;AxesSubplot:xlabel='Samples', ylabel='Counts'&gt;</code></pre>
</div>
</div>
<p>A very different set of words, clearly geared towards language therapy, and working directly with patients. Perhaps if we looked at the <em>slightly</em> less common words, we’d see links between these submissions - for example, we see <em>communication</em> appearing in both. Not a huge surprise, if we’re talking about public impact, but students of the public role of the university might start to wonder about the distinctions between <em>communication</em> and <em>engagement</em>.</p>
</section>
<section id="exercise" class="level2">
<h2 class="anchored" data-anchor-id="exercise">Exercise</h2>
<p>Repeat this for the examples from Panels B, C and D - what trends and keywords appear? What use do the collocations have? What do different parts of speech (e.g.&nbsp;verbs or proper nouns) tell you about the text?</p>
<p>If we wanted to analyse the sector as a whole, we would want to analyse Impact statements en masse - and we would hope that this would draw out links across differnt statements from different centres and universities, and even in different panels.</p>
</section>
<section id="working-with-larger-text-datasets" class="level2">
<h2 class="anchored" data-anchor-id="working-with-larger-text-datasets">Working with larger text datasets</h2>
<p>Working with larger text corpora starts to get slow. At this point, we will look at a body of text we have previously tagged up. The file is “The Nameless City” by H. P. Lovecraft, a horror author from the early 20th century.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This may take a little while - so wait for the task to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading the tokenized and tagged file. </span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>tagged <span class="op">=</span> pickle.load(urlopen(<span class="st">"https://s3.eu-west-2.amazonaws.com/qm2/wk7/lovecraft_tagged.pickle"</span>), encoding<span class="op">=</span><span class="st">'latin1'</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#How many sentences do we have?</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(tagged)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>18513</code></pre>
</div>
</div>
<p>This is tokenised by sentence - and there are 18,513 of them. That would have taken a long time to tag up. If you’re interested, this is how you take a set of <em>sentences</em> and tag them with Part of Speech:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>exampleSentences <span class="op">=</span> nltk.sent_tokenize(data)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>exampleTagged <span class="op">=</span> [nltk.pos_tag(nltk.word_tokenize(sent)) <span class="cf">for</span> sent <span class="kw">in</span> sentences]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the second line is running an implicit for loop through every sentence, and tagging each word.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first sentence.</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>exampleTagged[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>[('*', 'JJ'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('*', 'NNP'),
 ('title_inst_10000824-u_3-case_43396', 'JJ'),
 ('*', 'NNP'),
 ('UKPRN_10000824', 'NNP'),
 ('*', 'NNP'),
 ('uoa_3', 'JJ'),
 ('*', 'NNP'),
 ('ID_43396', 'NNP'),
 ('*', 'NNP'),
 ('panel_A', 'NN'),
 ('Bournemouth', 'NNP'),
 ('University', 'NNP'),
 ('(', '('),
 ('BU', 'NNP'),
 (')', ')'),
 ('has', 'VBZ'),
 ('facilitated', 'VBN'),
 ('improvements', 'NNS'),
 ('to', 'TO'),
 ('health', 'NN'),
 ('and', 'CC'),
 ('social', 'JJ'),
 ('care', 'NN'),
 ('practice', 'NN'),
 ('through', 'IN'),
 ('cultural', 'JJ'),
 ('change', 'NN'),
 ('in', 'IN'),
 ('care', 'NN'),
 ('provision', 'NN'),
 ('.', '.')]</code></pre>
</div>
</div>
<p>An impressive start! Let’s again build our word frequency chart. Note now that we have an extra layer of FOR - we need to look at each sentence in the text; at each word in each sentence; and then check each word to see whether it is of an allowed type.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>fd <span class="op">=</span> nltk.FreqDist()</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>permitted_tags <span class="op">=</span> <span class="bu">set</span>([</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'JJS'</span>,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'FW'</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NN'</span>,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NNS'</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NNP'</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NNPS'</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'UH'</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sentence <span class="kw">in</span> tagged:</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word <span class="kw">in</span> sentence:</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> word[<span class="dv">1</span>] <span class="kw">in</span> permitted_tags:</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>                fd[word[<span class="dv">0</span>]] <span class="op">=</span> fd[word[<span class="dv">0</span>]] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>fd.plot(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>&lt;AxesSubplot:xlabel='Samples', ylabel='Counts'&gt;</code></pre>
</div>
</div>
<p>Now that we’ve produced counts for all words which conform to our list of tags, we can quickly see how frequently common words appear; because we have tokenized by sentence, we have to do this with a slightly different mechanism - run through the words of interest and see how many occurrences appear in the Frequency Distribution object, fd. Again, we’re sneaking in a FOR loop to run through these.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> [<span class="st">'space'</span>, <span class="st">'nameless'</span>, <span class="st">'mad'</span>, <span class="st">'dread'</span>, <span class="st">'fear'</span>, <span class="st">'cthulhu'</span>, <span class="st">'necronomicon'</span>, <span class="st">'caring'</span>]:</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(word, fd[word])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>space 279
nameless 174
mad 101
dread 49
fear 282
cthulhu 40
necronomicon 54
caring 0</code></pre>
</div>
</div>
<p>So far, we’ve completely avoided the use of pandas - but we can put this data into a pandas dataframe very easily, and use the built-in graphing methods to change the style of our graph.</p>
<p>We feed in fd.keys() - the words - and fd.values(), the wordcount.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert to list so subscriptable</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(fd.keys())[<span class="dv">1</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>['city', 'valley', 'moon', 'afar', 'sands', 'parts', 'corpse', 'grave', 'fear']</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert to list so subscriptable</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(fd.values())[<span class="dv">1</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>[456, 116, 276, 27, 17, 108, 36, 80, 282]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert to list for use in creating dataframe</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'items'</span>: <span class="bu">list</span>(fd.keys()), <span class="st">'counts'</span>: <span class="bu">list</span>(fd.values())})</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ollieballinger/.pyenv/versions/3.9.5/lib/python3.9/site-packages/pandas/compat/__init__.py:97: UserWarning: Could not import the lzma module. Your installed Python is incomplete. Attempting to use lzma compression will result in a RuntimeError.
  warnings.warn(msg)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="35">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>items</th>
      <th>counts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>nameless</td>
      <td>174</td>
    </tr>
    <tr>
      <th>1</th>
      <td>city</td>
      <td>456</td>
    </tr>
    <tr>
      <th>2</th>
      <td>valley</td>
      <td>116</td>
    </tr>
    <tr>
      <th>3</th>
      <td>moon</td>
      <td>276</td>
    </tr>
    <tr>
      <th>4</th>
      <td>afar</td>
      <td>27</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Let’s now arrange them in order of appearance - the most common at the top.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(by<span class="op">=</span><span class="st">'counts'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>items</th>
      <th>counts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>137</th>
      <td>time</td>
      <td>960</td>
    </tr>
    <tr>
      <th>18</th>
      <td>man</td>
      <td>884</td>
    </tr>
    <tr>
      <th>192</th>
      <td>things</td>
      <td>875</td>
    </tr>
    <tr>
      <th>38</th>
      <td>night</td>
      <td>725</td>
    </tr>
    <tr>
      <th>215</th>
      <td>thing</td>
      <td>667</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>We now have a DataFrame with certain word tags sorted by decreasing frequency. Let’s plot this in a bar graph; we will use df[1:50] to select the most common 50 words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'ggplot'</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>:<span class="dv">50</span>].plot(kind<span class="op">=</span><span class="st">'bar'</span>, x<span class="op">=</span><span class="st">'items'</span>, y<span class="op">=</span><span class="st">'counts'</span>, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Word'</span>)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Word Count'</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Word counts for H.P. Lovecraft</span><span class="ch">\'</span><span class="st">s </span><span class="ch">\"</span><span class="st">The Nameless City</span><span class="ch">\"</span><span class="st">'</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>plt.axhline(df[<span class="st">'counts'</span>].mean(), color<span class="op">=</span><span class="st">'#2222ff'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>&lt;matplotlib.lines.Line2D at 0x1888076a0&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="W04.%20Natural%20Language%20Processing_files/figure-html/cell-35-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">Exercise</h2>
<p>What is the percentage of words that appear exactly once in the entire text? (Hint : FreqDist objects have a method called ‘hapaxes’)</p>
</section>
<section id="exercise-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2">Exercise</h2>
<p>The words of our ex Prime Minister, David Cameron:</p>
<pre><code>1. Select one of Cameron's speeches.
2. Sentence and word tokenize it.
3. POS tag it.
4. Create noun and adjective histograms of the 20 most frequent words.
(notice that there are several POS for each.)
5. Create dispersion plots for these nouns and adjectives. 
6. What is the percentage of words that are adjectives in the speech?</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read a raw text from a remote location. </span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>speech <span class="op">=</span> requests.get(<span class="st">'https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2006a.txt'</span>).text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="speeches" class="level3">
<h3 class="anchored" data-anchor-id="speeches">Speeches</h3>
<p>https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-election-victory-speech-2010.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2006a.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2006b.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2007.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2008.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2013.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2012.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2011.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2010.txt<br>
https://s3.eu-west-2.amazonaws.com/qm2/wk7/speeches/cameron-leaders-speech-2009.txt</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>speech</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>'It\x92s a huge honour to be standing before you as leader of the Conservative Party.\r\n\r\n \r\n\r\nAnd first of all I want to thank you for the support you\x92ve given me in the past ten months.\r\n\r\n \r\n\r\nIt\x92s been a time of great change.\r\n\r\n \r\n\r\nI\x92m already on my second leader of the Liberal Democrats.\r\n\r\n \r\n\r\nBefore long I\x92ll be on to my second Labour Prime Minister.\r\n\r\n \r\n\r\nSoon I\x92ll be the longest-serving leader of a major British political party.\r\n\r\n \r\n\r\nI wanted this job for a very simple reason.\r\n\r\n \r\n\r\nI love this country.\r\n\r\n \r\n\r\nI have great ambitions for our future.\r\n\r\n \r\n\r\nAnd I want the Party I love\x85\r\n\r\n \r\n\r\n\x85to serve the country I love\x85\r\n\r\n \r\n\r\n\x85in helping Britain be the best that it can.\r\n\r\n \r\n\r\nWe need to change in order to have that chance.\r\n\r\n \r\n\r\nYou cannot shape the future if you\x92re stuck in the past.\r\n\r\n \r\n\r\nYou knew that.\r\n\r\n \r\n\r\nAnd that\x92s why you voted for change.\r\n\r\n \r\n\r\nI believe we can all be proud of what we\x92ve achieved these past ten months.\r\n\r\n \r\n\r\nPeople looking at us with new interest.\r\n\r\n \r\n\r\n25,000 new members.\r\n\r\n \r\n\r\nAnd in our first electoral test, in the local elections, we won forty per cent of the vote.\r\n\r\n \r\n\r\nLet\x92s hear it for our fantastic local councillors who worked so hard and won so well.\r\n\r\n \r\n\r\nTony Blair says it\x92s all style and no substance.\r\n\r\n \r\n\r\nIn fact he wrote me a letter about it.\r\n\r\n \r\n\r\nDear Kettle\x85\r\n\r\n \r\n\r\nYou\x92re black.\r\n\r\n \r\n\r\nSigned, Pot.\r\n\r\n \r\n\r\nWhat a nerve that man has got.\r\n\r\n \r\n\r\nIn the whole of the last year, there is only one substantial thing that the Labour Party has achieved for our country.\r\n\r\n \r\n\r\nTheir education reforms.\r\n\r\n \r\n\r\nRight now, across the country, trust schools are being prepared with greater freedoms to teach children the way teachers and parents want.\r\n\r\n \r\n\r\nThe only reason \x96 the only reason - that\x92s happening is because the Conservative Party did the right thing and took the legislation through the House of Commons.\r\n\r\n \r\n\r\nI\x92m proud of that \x96 proud of us, for putting the future of our children before party politics.\r\n\r\n \r\n\r\nAnother sign of our changing fortunes is the impressive array of speakers who have come to join us at our conference this year.\r\n\r\n \r\n\r\nSENATOR McCAIN\r\n\r\n \r\n\r\nAnd I\x92d like to pay a special tribute to one in particular.\r\n\r\n \r\n\r\nHe\x92s a man who knows about leadership.\r\n\r\n \r\n\r\nHe\x92s endured hardship that\x92s unimaginable to many of us here.\r\n\r\n \r\n\r\nAnd he\x92s fought battles for principles that we all admire.\r\n\r\n \r\n\r\nWho knows what the future may hold?\r\n\r\n \r\n\r\nBut John, I for one would be proud to see you \x96 a great American and a great friend to Britain - as leader of the free world.\r\n\r\n \r\n\r\nCOLLEAGUES\r\n\r\n \r\n\r\nI\x92d also like to pay tribute to my colleagues who have spoken already today.\r\n\r\n \r\n\r\nA year ago, David Davis and I were rivals.\r\n\r\n \r\n\r\nToday we\x92re partners.\r\n\r\n \r\n\r\nHe has given me the most fantastic support over these past ten months.\r\n\r\n \r\n\r\nIdeas, energy, advice.\r\n\r\n \r\n\r\nHe has not only helped bring this Party together\x85\r\n\r\n \r\n\r\n\x85he has helped take our Party in the right direction, and I want to thank him for all he\x92s done.\r\n\r\n \r\n\r\nAnd I\x92m proud to work with another man who is a brave politician, a wise counsellor and a great Conservative.\r\n\r\n \r\n\r\nA man who would be a Foreign Secretary that this country could be truly proud of: William Hague.\r\n\r\n \r\n\r\nThen there\x92s Francis.\r\n\r\n \r\n\r\nI know Francis likes to pretend that everything is doom and gloom.\r\n\r\n \r\n\r\nHe\x92s always talking about the mountain we have to climb.\r\n\r\n \r\n\r\nHe\x92s so gloomy, he makes Gordon Brown look like a ray of sunshine.\r\n\r\n \r\n\r\nBut Francis, you\x92re doing a great job.\r\n\r\n \r\n\r\nLABOUR SPLITS AND BACKSTABBING\r\n\r\n \r\n\r\nOf course Francis has long told us to avoid the point-scoring and name-calling that can give politics such a bad name.\r\n\r\n \r\n\r\nHe\x92s right.\r\n\r\n \r\n\r\nBut we didn\x92t bargain on the Labour Party.\r\n\r\n \r\n\r\nFirst Gordon said he could never trust Tony again, then Tony called Gordon a blackmailer.\r\n\r\n \r\n\r\nCharles said Gordon was stupid, then John popped up and said no, Tony was stupid.\r\n\r\n \r\n\r\nCharles called Gordon a deluded control freak.\r\n\r\n \r\n\r\nAnd a member of the Cabinet said \x93it would be an absolute effing disaster\x94 if Gordon got to No.10.\r\n\r\n \r\n\r\nThat was just the husbands.\r\n\r\n \r\n\r\nWhen I look at these Labour ministers I ask myself how much time they\x92re worrying about their own jobs\x85\r\n\r\n \r\n\r\n\x85and how much time they\x92re worrying about NHS, about crime, about our troops in Iraq and Afghanistan.\r\n\r\n \r\n\r\nYou only have to ask the question to know what the answer is.\r\n\r\n \r\n\r\nAnd there are months more of it still to come.\r\n\r\n \r\n\r\nMonths of infighting, instability, indecision, jockeying for position\x85\r\n\r\n \r\n\r\nThey said it would be a \x93stable and orderly transition.\x94\r\n\r\n \r\n\r\nYeah, right.\r\n\r\n \r\n\r\nLike they said \x9324 hours to save the NHS\x94, \x93education education education.\x94\r\n\r\n \r\n\r\nThese are the things they should be fighting for, but they\x92re too busy fighting each other.\r\n\r\n \r\n\r\nOUR RESPONSIBILITY\r\n\r\n \r\n\r\nSo we have a great responsibility.\r\n\r\n \r\n\r\nTo set out a clear, united and credible alternative.\r\n\r\n \r\n\r\nWith some elections, you just know the result before a single vote has been cast.\r\n\r\n \r\n\r\nWe were never going to win in 1997.\r\n\r\n \r\n\r\nPeople wanted change.\r\n\r\n \r\n\r\nI remember it well.\r\n\r\n \r\n\r\nI fought Stafford.\r\n\r\n \r\n\r\nAnd Stafford fought back.\r\n\r\n \r\n\r\nLabour were never going to win in 1983 when they offered Michael Foot as Prime Minister.\r\n\r\n \r\n\r\nOther elections are wide open.\r\n\r\n \r\n\r\nAnd the next election will be one of those.\r\n\r\n \r\n\r\nBut we will not win, nor deserve to win, without a clear purpose and a proper plan.\r\n\r\n \r\n\r\nWe must learn from Labour\x92s big mistake.\r\n\r\n \r\n\r\nWhen Tony Blair won his first election, he had only one clear purpose: to win a second term.\r\n\r\n \r\n\r\nEven now he says that the only legacy \x96 the only legacy - that really matters to him is Labour winning a fourth term.\r\n\r\n \r\n\r\nBack in 1997, he had no proper plan.\r\n\r\n \r\n\r\nNo real understanding of how to make change happen.\r\n\r\n \r\n\r\nHe had good intentions.\r\n\r\n \r\n\r\nBut he hadn\x92t worked out how to deliver them.\r\n\r\n \r\n\r\nSo New Labour went round and round in circles.\r\n\r\n \r\n\r\nThey abolished grant maintained schools - and now they\x92re trying to recreate them.\r\n\r\n \r\n\r\nThey reversed our NHS reforms - and now they\x92re trying to bring them back.\r\n\r\n \r\n\r\nRoad building \x96 cancelled, then reinstated.\r\n\r\n \r\n\r\nThey wasted time, wasted money, wasted the country\x92s goodwill.\r\n\r\n \r\n\r\nOnly now, after nine years, does Tony Blair seem clear about his purpose.\r\n\r\n \r\n\r\nWell I\x92m sorry Mr Blair.\r\n\r\n \r\n\r\nThat\x92s nine years too late.\r\n\r\n \r\n\r\nTHIS WEEK\r\n\r\n \r\n\r\nWe won\x92t make the same mistake.\r\n\r\n \r\n\r\nOn Wednesday, the last day of our conference, I want to talk in detail about the important issues we face as a nation \x96 and what our response will be.\r\n\r\n \r\n\r\nBut today, on this first day of our conference, I\x92d like to set the scene for our discussions this week.\r\n\r\n \r\n\r\nI want to explain how we will arrive at the next election knowing exactly what we want to do, and how we\x92re going to do it.\r\n\r\n \r\n\r\nMy argument is based on a simple analogy.\r\n\r\n \r\n\r\nGetting ready for the responsibility of government is like building a house together.\r\n\r\n \r\n\r\nThink of it in three stages.\r\n\r\n \r\n\r\nFirst you prepare the ground.\r\n\r\n \r\n\r\nThen you lay the foundations.\r\n\r\n \r\n\r\nAnd then, finally, brick by brick, you build your house.\r\n\r\n \r\n\r\nPREPARING THE GROUND\r\n\r\n \r\n\r\nThese last ten months, we have been preparing the ground.\r\n\r\n \r\n\r\nOur Party\x92s history tells us the ground on which political success is built.\r\n\r\n \r\n\r\nIt is the centre ground.\r\n\r\n \r\n\r\nNot the bog of political compromise.\r\n\r\n \r\n\r\nNot the ideological wilderness, out on the fringes of debate.\r\n\r\n \r\n\r\nBut the solid ground where people are.\r\n\r\n \r\n\r\nThe centre ground is where you find the concerns, the hopes and the dreams of most people and families in this country.\r\n\r\n \r\n\r\nIn 1979, they wanted a government to tame the unions, rescue our economy and restore Britain\x92s pride.\r\n\r\n \r\n\r\nMargaret Thatcher offered precisely that alternative.\r\n\r\n \r\n\r\nAnd this Party can forever take pride in her magnificent achievements.\r\n\r\n \r\n\r\nToday, people want different things.\r\n\r\n \r\n\r\nThe priorities are different.\r\n\r\n \r\n\r\nSafer streets.\r\n\r\n \r\n\r\nSchools that teach.\r\n\r\n \r\n\r\nA better quality of life.\r\n\r\n \r\n\r\nBetter treatment for carers.\r\n\r\n \r\n\r\nThat\x92s what people are talking about today.\r\n\r\n \r\n\r\nBut for too long, we were having a different conversation.\r\n\r\n \r\n\r\nInstead of talking about the things that most people care about, we talked about what we cared about most.\r\n\r\n \r\n\r\nWhile parents worried about childcare, getting the kids to school, balancing work and family life - we were banging on about Europe.\r\n\r\n \r\n\r\nAs they worried about standards in thousands of secondary schools, we obsessed about a handful more grammar schools.\r\n\r\n \r\n\r\nAs rising expectations demanded a better NHS for everyone, we put our faith in opt-outs for a few.\r\n\r\n \r\n\r\nWhile people wanted, more than anything, stability and low mortgage rates, the first thing we talked about was tax cuts.\r\n\r\n \r\n\r\nFor years, this country wanted \x96 desperately needed - a sensible centre-right party to sort things out in a sensible way.\r\n\r\n \r\n\r\nWell, that\x92s what we are today.\r\n\r\n \r\n\r\nIn these past ten months we have moved back to the ground on which this Party\x92s success has always been built.\r\n\r\n \r\n\r\nThe centre ground of British politics.\r\n\r\n \r\n\r\nAnd that is where we will stay.\r\n\r\n \r\n\r\nLAYING THE FOUNDATIONS \x96 SOCIAL RESPONSIBILITY\r\n\r\n \r\n\r\nBut preparing the ground is just the first stage.\r\n\r\n \r\n\r\nNow we must show what we will build there.\r\n\r\n \r\n\r\nA strong government needs strong foundations.\r\n\r\n \r\n\r\nAnd I want us to lay those foundations this week.\r\n\r\n \r\n\r\nThat\x92s not about individual policies.\r\n\r\n \r\n\r\nIt is about a vision of the Britain we want to see.\r\n\r\n \r\n\r\nA Britain where we do not just ask what government can do.\r\n\r\n \r\n\r\nWe ask what people can do, what society can do.\r\n\r\n \r\n\r\nA Britain where we stop thinking you can pass laws to make people good.\r\n\r\n \r\n\r\nAnd start realising that we are all in this together.\r\n\r\n \r\n\r\nSocial responsibility \x96 that is the essence of liberal Conservatism.\r\n\r\n \r\n\r\nThat is the idea I want us to explain this week.\r\n\r\n \r\n\r\nThat is what we stand for.\r\n\r\n \r\n\r\nThat is what we\x92re fighting for.\r\n\r\n \r\n\r\nThat is the Britain we want to build.\r\n\r\n \r\n\r\nTake fighting crime.\r\n\r\n \r\n\r\nIt is not just a state responsibility.\r\n\r\n \r\n\r\nIt is a social responsibility.\r\n\r\n \r\n\r\nLet\x92s not pretend that all we need is tough talk and tough laws to bring safety to our streets.\r\n\r\n \r\n\r\nOf course the state must play its part.\r\n\r\n \r\n\r\nThat\x92s why we\x92re developing a programme of radical police reform.\r\n\r\n \r\n\r\nThat\x92s why we want to build more prisons and reform the ones we\x92ve got, so they help reduce re-offending instead of encouraging it.\r\n\r\n \r\n\r\nAnd that\x92s why we\x92ll invest in drug rehabilitation, so we help addicts get clean and stay clean, instead of living a life of crime to feed their habit.\r\n\r\n \r\n\r\nBut that is not the end of the story.\r\n\r\n \r\n\r\nIt is just the start.\r\n\r\n \r\n\r\nWe need parents to bring up their children with the right values.\r\n\r\n \r\n\r\nWe need schools to be places of discipline and order.\r\n\r\n \r\n\r\nWe need to stand up for civilised values in public places.\r\n\r\n \r\n\r\nWe need to design crime out of the housing estates of the future.\r\n\r\n \r\n\r\nWe\x92ve got to stop selling alcohol to children.\r\n\r\n \r\n\r\nWe need the music industry to understand that profiting from violent and homophobic words and images is morally wrong and socially unacceptable.\r\n\r\n \r\n\r\nBut more than this, we need people, families, communities, businesses to step up to the plate and understand that it\x92s not just about stopping the bad things\x85\r\n\r\n \r\n\r\n\x85it\x92s about actively doing the good things.\r\n\r\n \r\n\r\nNot waiting for the state to do it all, but taking responsibility, making a difference, saying loudly and proudly: this is my country, this is my community: I will play my part.\r\n\r\n \r\n\r\nThat is social responsibility.\r\n\r\n \r\n\r\nThat is our idea.\r\n\r\n \r\n\r\nSo I want us to be the champions of a new spirit of social responsibility in this land.\r\n\r\n \r\n\r\nA new spirit of social responsibility that will succeed for Britain where Labour\x92s outdated state responsibility has failed.\r\n\r\n \r\n\r\nLABOUR\x92S APPROACH\r\n\r\n \r\n\r\nThink of any issue - not just crime - and then think of Labour\x92s response.\r\n\r\n \r\n\r\nThis Government\x92s way of doing things \x96 the old way of doing things - is so familiar, and so depressing.\r\n\r\n \r\n\r\nMinisters hold a summit.\r\n\r\n \r\n\r\nThey announce an eye-catching initiative.\r\n\r\n \r\n\r\nA five-year plan.\r\n\r\n \r\n\r\nGordon Brown generously finds the money for it.\r\n\r\n \r\n\r\nThe money gets a headline, but no-one knows what to do with it.\r\n\r\n \r\n\r\nSo they create a unit in the Cabinet Office.\r\n\r\n \r\n\r\nA task force is set up.\r\n\r\n \r\n\r\nRegional co-ordinators are appointed.\r\n\r\n \r\n\r\nGordon Brown sets them targets \x96 after all, it is his money.\r\n\r\n \r\n\r\nPilot schemes are launched.\r\n\r\n \r\n\r\nThe pilot schemes are rolled out across the country.\r\n\r\n \r\n\r\nThey are evaluated.\r\n\r\n \r\n\r\nThen revised, re-organised and re-launched.\r\n\r\n \r\n\r\nAnd then finally, once the reality dawns that the only people to benefit are the lawyers, accountants and consultants of Labour\x92s quango army\x85\r\n\r\n \r\n\r\n\x85with a pathetic whimper \x96 but no hint of an apology \x96 the whole thing is just abandoned.\r\n\r\n \r\n\r\nWe\x92ve seen too much of this in the past nine years.\r\n\r\n \r\n\r\nHeadline after headline but absolutely no follow-through.\r\n\r\n \r\n\r\nIt is a story of ignorance, incompetence, arrogance.\r\n\r\n \r\n\r\nA story of wasted billions - and disappointed millions.\r\n\r\n \r\n\r\nSomewhere out there, there is a place where Blair and Brown will never go.\r\n\r\n \r\n\r\nIt\x92s dark.\r\n\r\n \r\n\r\nIt\x92s depressing.\r\n\r\n \r\n\r\nIt\x92s haunted by the failures of nine years of centralisation, gimmick and spin.\r\n\r\n \r\n\r\nIt is the graveyard of initiatives, where you\x92ll find the e-University that died a death,\r\n\r\n \r\n\r\nthe drugs czar that came and went\x85\r\n\r\n \r\n\r\n\x85the Individual Learning Accounts that collapsed in fraud and waste, the tax credits that were paid and reclaimed\x85\r\n\r\n \r\n\r\n\x85the Connexions service that flopped, the Strategic Health Authorities that were dropped\x85\r\n\r\n \r\n\r\n\x85the marching of yobs to the hole in the wall; the night courts that never happened at all.\r\n\r\n \r\n\r\nAnd still they keep coming, those hubristic monuments to big government, the living dead that walk the well-trodden path from Downing Street and the Treasury to New Labour\x92s graveyard of initiatives.\r\n\r\n \r\n\r\nThe NHS computer: delayed, disorganised, a £20 billion shambles.\r\n\r\n \r\n\r\nForced police mergers: the direct opposite of the community policing we need.\r\n\r\n \r\n\r\nAnd then the perfect example.\r\n\r\n \r\n\r\nID cards.\r\n\r\n \r\n\r\nWhen a half-way competent government would be protecting our security by controlling our borders\x85\r\n\r\n \r\n\r\n\x85these Labour ministers are pressing ahead with their vast white elephant, their plastic poll tax, twenty Millennium Domes rolled into one giant catastrophe in the making.\r\n\r\n \r\n\r\nThey\x92ve given up trying to find a good reason for it.\r\n\r\n \r\n\r\nLast week Tony Blair said that ID cards would help control immigration, when new immigrants won\x92t even have them.\r\n\r\n \r\n\r\nDoes he even know what\x92s going on in his Government?\r\n\r\n \r\n\r\nID cards are wrong, they\x92re a waste of money, and we will abolish them.\r\n\r\n \r\n\r\nThese last nine years have been the story of a Government which instinctively believes, whatever it says, that everything is the state\x92s responsibility.\r\n\r\n \r\n\r\nWe believe in social responsibility.\r\n\r\n \r\n\r\nBecause there is such a thing as society, it\x92s just not the same thing as the state.\r\n\r\n \r\n\r\nTHE BRITAIN WE WANT TO SEE\r\n\r\n \r\n\r\nSo let us define this week the kind of Britain we want to see.\r\n\r\n \r\n\r\nAnd let us show how our idea \x96 social responsibility\x85\r\n\r\n \r\n\r\n\x85not Labour\x92s idea \x96 state responsibility\x85\r\n\r\n \r\n\r\n\x85is the right response to the challenges Britain faces.\r\n\r\n \r\n\r\nGLOBALISATION, WELL-BEING, THE ENVIRONMENT\r\n\r\n \r\n\r\nWe know that in the age of globalisation, in the face of fast-moving economic change, people want their government to provide security.\r\n\r\n \r\n\r\nWe know that the end of the traditional 9 to 5 job can make life tough for families, and people look to their government for answers.\r\n\r\n \r\n\r\nAnd we know that in the race against time to tackle climate change and protect the environment, people expect their government to show leadership.\r\n\r\n \r\n\r\nOn all these challenges, Labour\x92s first response is to regulate business, hoping to offer protection.\r\n\r\n \r\n\r\nIt may sound attractive.\r\n\r\n \r\n\r\nBut there are unintended consequences.\r\n\r\n \r\n\r\nWell-intentioned regulation can make us less secure in the age of globalisation.\r\n\r\n \r\n\r\nLess able to provide the jobs, wealth and opportunity on which well-being depends.\r\n\r\n \r\n\r\nIt can undermine the competitiveness of our companies, so it\x92s harder for them to invest in the new, green technologies of the future.\r\n\r\n \r\n\r\nSo our response, based on our philosophy of social responsibility, is to say to business:\r\n\r\n \r\n\r\nYes you should look after your workers, yes you should look after your community, yes you should look after our environment.\r\n\r\n \r\n\r\nAnd we must stand up to big business when it\x92s in the interests of Britain and the wider world.\r\n\r\n \r\n\r\nSo next week our MEPs will vote to strengthen proposals to make companies replace dangerous chemicals with safe ones.\r\n\r\n \r\n\r\nBut where Labour are casual about increasing regulation, we will be careful.\r\n\r\n \r\n\r\nWe will ask:\r\n\r\n \r\n\r\nAre we making it easier to start a business?\r\n\r\n \r\n\r\nEasier to employ someone?\r\n\r\n \r\n\r\nIs the overall burden of regulation going down?\r\n\r\n \r\n\r\nWill the regulation that\x92s being put forward lead to real changes in behaviour, or just time-wasting and box-ticking?\r\n\r\n \r\n\r\nIf only we had a government that was asking these questions today.\r\n\r\n \r\n\r\nWe want companies to create their own solutions to social and environmental challenges, because those are the solutions most likely to last.\r\n\r\n \r\n\r\nSo in a Conservative Britain, corporate responsibility will provide the best long-term answer to economic insecurity, well-being in the workplace, and environmental care.\r\n\r\n \r\n\r\nIt is the same approach when you look at the other great challenges we face.\r\n\r\n \r\n\r\nPUBLIC SERVICES\r\n\r\n \r\n\r\nWe know that in an age of amazing technological advance, instant information exchange, and empowered consumers who don\x92t have the deference of previous generations\x85\r\n\r\n \r\n\r\n\x85people expect more from our health service and our schools.\r\n\r\n \r\n\r\nAnd government has to respond to that.\r\n\r\n \r\n\r\nLabour\x92s response is the culture of targets, directives and central control, aimed at raising standards in our public services.\r\n\r\n \r\n\r\nThey mean well.\r\n\r\n \r\n\r\nBut the unintended consequence is to make these services less responsive to the people who use them, dashing expectations not meeting them.\r\n\r\n \r\n\r\nSo our response, based on our philosophy of social responsibility, is to say to our nurses, doctors, teachers:\r\n\r\n \r\n\r\nYes you should meet higher standards, yes you should give your patients and your pupils more.\r\n\r\n \r\n\r\nBut we\x92re not going to tell you how to do it.\r\n\r\n \r\n\r\nYou are professionals.\r\n\r\n \r\n\r\nWe trust in your vocation\r\n\r\n \r\n\r\nSo in a Conservative Britain, professional responsibility will provide the answer to rising expectations in the NHS and schools.\r\n\r\n \r\n\r\nPOVERTY AND REGENERATION\r\n\r\n \r\n\r\nAnd just as people will no longer accept second best in public services, we know that in their communities they are fed up with squalor and poverty and crime\x85\r\n\r\n \r\n\r\n\x85and they look to their leaders to sort things out.\r\n\r\n \r\n\r\nLabour\x92s response has been a massive expansion of central government into local communities.\r\n\r\n \r\n\r\nThe centralised Neighbourhood Renewal Unit, the insensitive Pathfinder programme, prescriptive top-down schemes for regeneration.\r\n\r\n \r\n\r\nYou can see why Labour have done it.\r\n\r\n \r\n\r\nBut the unintended consequence is to stifle the very spirit of community self-improvement that they are responding to.\r\n\r\n \r\n\r\nOur response, based on our philosophy of social responsibility, is to trust local leaders, not undermine them.\r\n\r\n \r\n\r\nSo we will hand power and control to local councils and local people who have the solutions to poverty, to crime, to urban decay in their hands.\r\n\r\n \r\n\r\nWe trust in your knowledge and commitment.\r\n\r\n \r\n\r\nSo in a Conservative Britain, civic responsibility will provide the answer to improving the quality of life in the communities left behind.\r\n\r\n \r\n\r\nCHILDREN\r\n\r\n \r\n\r\nAnd then perhaps the greatest challenge of all.\r\n\r\n \r\n\r\nThe challenge of bringing up children in a world that often seems fraught with risk and danger.\r\n\r\n \r\n\r\nThere is nothing that matters more to me than the safety and happiness of my family.\r\n\r\n \r\n\r\nOf course it\x92s right that government should be on parents\x92 side.\r\n\r\n \r\n\r\nBut Labour take it way too far.\r\n\r\n \r\n\r\nA national database of every child.\r\n\r\n \r\n\r\nMaking childcare a state monopoly.\r\n\r\n \r\n\r\nSlapping ASBOs on children who haven\x92t even been born.\r\n\r\n \r\n\r\nLabour\x92s intentions may be good.\r\n\r\n \r\n\r\nBut the unintended consequence is to create a culture of irresponsibility.\r\n\r\n \r\n\r\nThey may have abandoned Clause 4 and the nationalisation of industry.\r\n\r\n \r\n\r\nBut they are replacing it with the nationalisation of everyday life.\r\n\r\n \r\n\r\nThe state can never be everywhere, policing the interactions of our daily lives - and it shouldn\x92t try.\r\n\r\n \r\n\r\nReal change will take years of patient hard work, and we will test every policy by asking: does it enhance parental responsibility?\r\n\r\n \r\n\r\nWe need to understand that cultural change is worth any number of government initiatives.\r\n\r\n \r\n\r\nWho has done more to improve school food, Jamie Oliver, or the Department of Education?\r\n\r\n \r\n\r\nPut another way, we need more of Supernanny, less of the nanny state.\r\n\r\n \r\n\r\nSo in a Conservative Britain, personal responsibility will provide the best answer to the risks and dangers of the modern world.\r\n\r\n \r\n\r\nPersonal responsibility.\r\n\r\n \r\n\r\nProfessional responsibility.\r\n\r\n \r\n\r\nCorporate responsibility.\r\n\r\n \r\n\r\nCivic responsibility.\r\n\r\n \r\n\r\nThese are the four pillars of our social responsibility.\r\n\r\n \r\n\r\nThat is the Britain we want to build.\r\n\r\n \r\n\r\nA Britain that is more green.\r\n\r\n \r\n\r\nMore family-friendly.\r\n\r\n \r\n\r\nMore local control over the things that matter.\r\n\r\n \r\n\r\nLess arrogant about politicians\x92 ability to do it all on their own.\r\n\r\n \r\n\r\nBut more optimistic about what we can achieve if we all work together.\r\n\r\n \r\n\r\nWe want an opportunity society, not an overpowering state.\r\n\r\n \r\n\r\nBUILDING OUR HOUSE\r\n\r\n \r\n\r\nThis week, in our debates, we will lay the foundations of the house we are building together.\r\n\r\n \r\n\r\nThe foundations must come first.\r\n\r\n \r\n\r\nHow superficial, how insubstantial it would be, for us to make up policies to meet the pressures of the moment.\r\n\r\n \r\n\r\nPolicy without principle is like a house without foundations.\r\n\r\n \r\n\r\nIt will not stand the test of time.\r\n\r\n \r\n\r\nThat is what our Policy Review is all about: getting it right for the long term.\r\n\r\n \r\n\r\nOPTIMISM ABOUT BRITAIN\x92S FUTURE\r\n\r\n \r\n\r\nIf we do this, we can help achieve so much for this country.\r\n\r\n \r\n\r\nIn a few years\x92 time, Britain could wake up to a bright new morning.\r\n\r\n \r\n\r\nWe have everything to be optimistic about.\r\n\r\n \r\n\r\nYou could not design a country with better natural advantages than we have.\r\n\r\n \r\n\r\nWe speak the language of the world.\r\n\r\n \r\n\r\nWe have links of history and culture with every continent on earth.\r\n\r\n \r\n\r\nWe have institutions \x96 our legal system, our armed forces, the BBC, our great universities \x96 which set the standard that all other countries measure themselves by.\r\n\r\n \r\n\r\nOur artists, writers and musicians inspire people the world over.\r\n\r\n \r\n\r\nWe are inventive, creative, irreverent and daring.\r\n\r\n \r\n\r\nIn this young century, these old advantages give us the edge we need.\r\n\r\n \r\n\r\nCONCLUSION\r\n\r\n \r\n\r\nWhat a prospect for a great Party \x96 to guide our nation at this time of opportunity.\r\n\r\n \r\n\r\nSo let us stick to the plan.\r\n\r\n \r\n\r\nLet us build - carefully, thoughtfully and patiently, a new house together.\r\n\r\n \r\n\r\nPreparing the ground as we move to the centre, meeting the priorities of the modern world.\r\n\r\n \r\n\r\nLaying the foundations with our idea - social responsibility.\r\n\r\n \r\n\r\nAnd building on those foundations with the right policies for our long-term future.\r\n\r\n \r\n\r\nThe nation\x92s hopes are in our hands.\r\n\r\n \r\n\r\nPeople\x92s hopes.\r\n\r\n \r\n\r\nYour hopes.\r\n\r\n \r\n\r\nMy hopes.\r\n\r\n \r\n\r\nIn eight days\x92 time I will be forty years old.\r\n\r\n \r\n\r\nI have so much to look forward to.\r\n\r\n \r\n\r\nMy young family.\r\n\r\n \r\n\r\nThey have so much to look forward to.\r\n\r\n \r\n\r\nThe world I want for them is the world I want for every family and every community.\r\n\r\n \r\n\r\nIf you want to know what I\x92m all about, I can explain it one word.\r\n\r\n \r\n\r\nThat word is optimism.\r\n\r\n \r\n\r\nI am optimistic about human nature.\r\n\r\n \r\n\r\nThat\x92s why I will trust people to do the right thing.\r\n\r\n \r\n\r\nLabour are pessimists.\r\n\r\n \r\n\r\nThey think that without their guidance, people will do the wrong thing.\r\n\r\n \r\n\r\nThat\x92s why they want to regulate and control.\r\n\r\n \r\n\r\nSo let us show clearly which side we are on.\r\n\r\n \r\n\r\nLet optimism beat pessimism.\r\n\r\n \r\n\r\nLet sunshine win the day.\r\n\r\n \r\n\r\nAnd let everyone know that the Conservative Party is ready.\r\n\r\n \r\n\r\nReady to serve.\r\n\r\n \r\n\r\nReady to fight.\r\n\r\n \r\n\r\nReady to win.'</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../notebooks/W03. Spatial Data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Working with Spatiotemporal Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../notebooks/W05. Merging and Joining.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Merging and Joining Data in Python</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>